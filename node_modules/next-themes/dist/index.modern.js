import e,{createContext as t,useContext as n,useState as r,useCallback as o,useEffect as a,memo as i}from"react";import m from"next/head";var c=t({}),s=function(){return n(c)},d=function(t){var n=t.forcedTheme,i=t.disableTransitionOnChange,m=void 0!==i&&i,s=t.enableSystem,d=void 0===s||s,v=t.storageKey,f=void 0===v?"theme":v,y=t.themes,g=void 0===y?["light","dark"]:y,p=t.defaultTheme,S=void 0===p?"light":p,T=t.attribute,w=void 0===T?"data-theme":T,E=t.value,b=t.children,L=r(function(){return l(f)}),k=L[0],x=L[1],I=r(function(){return l(f)}),_=I[0],C=I[1],M=o(function(e,t){void 0===t&&(t=!0);var n,r=E?Object.values(E):g,o=(null==E?void 0:E[e])||e,a=m?h():null;t&&localStorage.setItem(f,e),"class"===w?((n=document.documentElement.classList).remove.apply(n,r),document.documentElement.classList.add(o)):document.documentElement.setAttribute(w,o),null==a||a()},[]),O=o(function(e){var t=e.matches?"dark":"light";C(t),"system"===k&&M(t,!1)},[k]);a(function(){if(d){var e=window.matchMedia("(prefers-color-scheme: dark)");return e.addListener(O),O(e),function(){return e.removeListener(O)}}},[O]);var j=o(function(e){n||(M(e),x(e))},[]);return a(function(){var e=function(e){"theme"===e.key&&j(e.newValue)};return window.addEventListener("storage",e),function(){return window.removeEventListener("storage",e)}},[]),e.createElement(c.Provider,{value:{theme:k,setTheme:j,forcedTheme:n,resolvedTheme:"system"===k?_:k,themes:d?[].concat(g,["system"]):g,systemTheme:d?_:void 0}},e.createElement(u,{forcedTheme:n,storageKey:f,attribute:w,value:E,enableSystem:d,defaultTheme:S,themes:g}),b)},u=i(function(t){var n=t.forcedTheme,r=t.storageKey,o=t.attribute,a=t.enableSystem,i=t.defaultTheme,c=t.value,s=t.themes,d=function(e,t){var n=c?Object.values(c):s;c&&(e=c[e]||e);var r=t?e:"'"+e+"'";return"class"===o?"document.documentElement.classList.remove("+n.map(function(e){return"'"+e+"'"}).join(",")+")document.documentElement.classList.add("+r+")":"document.documentElement.setAttribute('"+o+"', "+r+")"};return e.createElement(m,null,e.createElement("script",n?{key:"next-themes-script",dangerouslySetInnerHTML:{__html:"!function(){"+d(n)+"}()"}}:a?{key:"next-themes-script",dangerouslySetInnerHTML:{__html:"!function(){try {var e=localStorage.getItem('"+r+"');if(!e)return localStorage.setItem('"+r+"','"+i+"'), void "+d(i)+';if("system"===e){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?'+d("dark")+":"+d("light")+"}else "+(c?"var x = "+JSON.stringify(c)+";":"")+d(c?"x[e]":"e",!0)+"}catch(e){}}()"}}:{key:"next-themes-script",dangerouslySetInnerHTML:{__html:'!function(){try{var t=localStorage.getItem("'+r+'");if(!t)return localStorage.setItem("'+r+'","'+i+'"),void '+d(i)+";"+(c?"var x = "+JSON.stringify(c)+";":"")+d(c?"x[t]":"t",!0)+"}catch(t){}}();"}}))}),l=function(e){if("undefined"!=typeof window)return localStorage.getItem(e)||void 0},h=function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition: none !important;-moz-transition: none !important;-o-transition: none !important;-ms-transition: none !important;transition: none !important}")),document.head.appendChild(e),function(){window.getComputedStyle(e),document.head.removeChild(e)}};export{d as ThemeProvider,s as useTheme};
