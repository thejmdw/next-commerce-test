{"ast":null,"code":"import _toConsumableArray from \"/Users/thejmdw/workspace/websites/next-commerce-test/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/thejmdw/workspace/websites/next-commerce-test/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"/Users/thejmdw/workspace/websites/next-commerce-test/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/thejmdw/workspace/websites/next-commerce-test/components/product/ProductSlider/ProductSlider.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useKeenSlider } from 'keen-slider/react';\nimport React, { Children, isValidElement, useState, useRef, useEffect } from 'react';\nimport cn from 'classnames';\nimport s from './ProductSlider.module.css';\n\nvar ProductSlider = function ProductSlider(_ref) {\n  _s();\n\n  var children = _ref.children;\n\n  var _useState = useState(0),\n      currentSlide = _useState[0],\n      setCurrentSlide = _useState[1];\n\n  var _useState2 = useState(false),\n      isMounted = _useState2[0],\n      setIsMounted = _useState2[1];\n\n  var sliderContainerRef = useRef(null);\n\n  var _useKeenSlider = useKeenSlider({\n    loop: true,\n    slidesPerView: 1,\n    mounted: function mounted() {\n      return setIsMounted(true);\n    },\n    slideChanged: function slideChanged(s) {\n      setCurrentSlide(s.details().relativeSlide);\n    }\n  }),\n      _useKeenSlider2 = _slicedToArray(_useKeenSlider, 2),\n      ref = _useKeenSlider2[0],\n      slider = _useKeenSlider2[1]; // Stop the history navigation gesture on touch devices\n\n\n  useEffect(function () {\n    var preventNavigation = function preventNavigation(event) {\n      // Center point of the touch area\n      var touchXPosition = event.touches[0].pageX; // Size of the touch area\n\n      var touchXRadius = event.touches[0].radiusX || 0; // We set a threshold (10px) on both sizes of the screen,\n      // if the touch area overlaps with the screen edges\n      // it's likely to trigger the navigation. We prevent the\n      // touchstart event in that case.\n\n      if (touchXPosition - touchXRadius < 10 || touchXPosition + touchXRadius > window.innerWidth - 10) event.preventDefault();\n    };\n\n    sliderContainerRef.current.addEventListener('touchstart', preventNavigation);\n    return function () {\n      if (sliderContainerRef.current) {\n        sliderContainerRef.current.removeEventListener('touchstart', preventNavigation);\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: s.root,\n    ref: sliderContainerRef,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: cn(s.leftControl, s.control),\n      onClick: slider === null || slider === void 0 ? void 0 : slider.prev,\n      \"aria-label\": \"Previous Product Image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: cn(s.rightControl, s.control),\n      onClick: slider === null || slider === void 0 ? void 0 : slider.next,\n      \"aria-label\": \"Next Product Image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: ref,\n      className: \"keen-slider h-full transition-opacity duration-150\",\n      style: {\n        opacity: isMounted ? 1 : 0\n      },\n      children: Children.map(children, function (child) {\n        // Add the keen-slider__slide className to children\n        if ( /*#__PURE__*/isValidElement(child)) {\n          return _objectSpread(_objectSpread({}, child), {}, {\n            props: _objectSpread(_objectSpread({}, child.props), {}, {\n              className: \"\".concat(child.props.className ? \"\".concat(child.props.className, \" \") : '', \"keen-slider__slide\")\n            })\n          });\n        }\n\n        return child;\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, _this), slider && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: cn(s.positionIndicatorsContainer),\n      children: _toConsumableArray(Array(slider.details().size).keys()).map(function (idx) {\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          \"aria-label\": \"Position indicator\",\n          className: cn(s.positionIndicator, _defineProperty({}, s.positionIndicatorActive, currentSlide === idx)),\n          onClick: function onClick() {\n            slider.moveToSlideRelative(idx);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: s.dot\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 17\n          }, _this)\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 15\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(ProductSlider, \"CFSv3S0kuvK2bJuAqSVJM/N4tp4=\", false, function () {\n  return [useKeenSlider];\n});\n\n_c = ProductSlider;\nexport default ProductSlider;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductSlider\");","map":{"version":3,"sources":["/Users/thejmdw/workspace/websites/next-commerce-test/components/product/ProductSlider/ProductSlider.tsx"],"names":["useKeenSlider","React","Children","isValidElement","useState","useRef","useEffect","cn","s","ProductSlider","children","currentSlide","setCurrentSlide","isMounted","setIsMounted","sliderContainerRef","loop","slidesPerView","mounted","slideChanged","details","relativeSlide","ref","slider","preventNavigation","event","touchXPosition","touches","pageX","touchXRadius","radiusX","window","innerWidth","preventDefault","current","addEventListener","removeEventListener","root","leftControl","control","prev","rightControl","next","opacity","map","child","props","className","positionIndicatorsContainer","Array","size","keys","idx","positionIndicator","positionIndicatorActive","moveToSlideRelative","dot"],"mappings":"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","sourcesContent":["import { useKeenSlider } from 'keen-slider/react'\nimport React, {\n  Children,\n  FC,\n  isValidElement,\n  useState,\n  useRef,\n  useEffect,\n} from 'react'\nimport cn from 'classnames'\n\nimport s from './ProductSlider.module.css'\n\nconst ProductSlider: FC = ({ children }) => {\n  const [currentSlide, setCurrentSlide] = useState(0)\n  const [isMounted, setIsMounted] = useState(false)\n  const sliderContainerRef = useRef<HTMLDivElement>(null)\n\n  const [ref, slider] = useKeenSlider<HTMLDivElement>({\n    loop: true,\n    slidesPerView: 1,\n    mounted: () => setIsMounted(true),\n    slideChanged(s) {\n      setCurrentSlide(s.details().relativeSlide)\n    },\n  })\n\n  // Stop the history navigation gesture on touch devices\n  useEffect(() => {\n    const preventNavigation = (event: TouchEvent) => {\n      // Center point of the touch area\n      const touchXPosition = event.touches[0].pageX\n      // Size of the touch area\n      const touchXRadius = event.touches[0].radiusX || 0\n\n      // We set a threshold (10px) on both sizes of the screen,\n      // if the touch area overlaps with the screen edges\n      // it's likely to trigger the navigation. We prevent the\n      // touchstart event in that case.\n      if (\n        touchXPosition - touchXRadius < 10 ||\n        touchXPosition + touchXRadius > window.innerWidth - 10\n      )\n        event.preventDefault()\n    }\n\n    sliderContainerRef.current!.addEventListener(\n      'touchstart',\n      preventNavigation\n    )\n\n    return () => {\n      if (sliderContainerRef.current) {\n        sliderContainerRef.current!.removeEventListener(\n          'touchstart',\n          preventNavigation\n        )\n      }\n    }\n  }, [])\n\n  return (\n    <div className={s.root} ref={sliderContainerRef}>\n      <button\n        className={cn(s.leftControl, s.control)}\n        onClick={slider?.prev}\n        aria-label=\"Previous Product Image\"\n      />\n      <button\n        className={cn(s.rightControl, s.control)}\n        onClick={slider?.next}\n        aria-label=\"Next Product Image\"\n      />\n      <div\n        ref={ref}\n        className=\"keen-slider h-full transition-opacity duration-150\"\n        style={{ opacity: isMounted ? 1 : 0 }}\n      >\n        {Children.map(children, (child) => {\n          // Add the keen-slider__slide className to children\n          if (isValidElement(child)) {\n            return {\n              ...child,\n              props: {\n                ...child.props,\n                className: `${\n                  child.props.className ? `${child.props.className} ` : ''\n                }keen-slider__slide`,\n              },\n            }\n          }\n          return child\n        })}\n      </div>\n      {slider && (\n        <div className={cn(s.positionIndicatorsContainer)}>\n          {[...Array(slider.details().size).keys()].map((idx) => {\n            return (\n              <button\n                aria-label=\"Position indicator\"\n                key={idx}\n                className={cn(s.positionIndicator, {\n                  [s.positionIndicatorActive]: currentSlide === idx,\n                })}\n                onClick={() => {\n                  slider.moveToSlideRelative(idx)\n                }}\n              >\n                <div className={s.dot} />\n              </button>\n            )\n          })}\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default ProductSlider\n"]},"metadata":{},"sourceType":"module"}