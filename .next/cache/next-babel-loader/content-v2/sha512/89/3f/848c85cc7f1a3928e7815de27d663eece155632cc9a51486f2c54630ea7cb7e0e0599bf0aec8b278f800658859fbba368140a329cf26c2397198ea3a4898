{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport { useCallback } from 'react';\nimport { useCommerce } from '..';\nimport _useData from './use-data';\nexport function useFetcher() {\n  _s();\n\n  var _providerRef$current$;\n\n  var _useCommerce = useCommerce(),\n      providerRef = _useCommerce.providerRef,\n      fetcherRef = _useCommerce.fetcherRef;\n\n  return (_providerRef$current$ = providerRef.current.fetcher) !== null && _providerRef$current$ !== void 0 ? _providerRef$current$ : fetcherRef.current;\n}\n\n_s(useFetcher, \"EHfh1xEaHrnMpiJiFEUjBI/0db0=\", false, function () {\n  return [useCommerce];\n});\n\nexport function useHook(fn) {\n  _s2();\n\n  var _useCommerce2 = useCommerce(),\n      providerRef = _useCommerce2.providerRef;\n\n  var provider = providerRef.current;\n  return fn(provider);\n}\n\n_s2(useHook, \"QlKeHkbrw8bzgEFoMcC78rf56Ks=\", false, function () {\n  return [useCommerce];\n});\n\nexport function useSWRHook(hook) {\n  _s3();\n\n  var fetcher = useFetcher();\n  return hook.useHook({\n    useData: function useData(ctx) {\n      var _ctx$input;\n\n      var response = _useData(hook, (_ctx$input = ctx === null || ctx === void 0 ? void 0 : ctx.input) !== null && _ctx$input !== void 0 ? _ctx$input : [], fetcher, ctx === null || ctx === void 0 ? void 0 : ctx.swrOptions);\n\n      return response;\n    }\n  });\n}\n\n_s3(useSWRHook, \"K1tjiCoq4yH6pKKCqSk1EOrRz1w=\", true, function () {\n  return [useFetcher];\n});\n\nexport function useMutationHook(hook) {\n  _s4();\n\n  var fetcher = useFetcher();\n  return hook.useHook({\n    fetch: useCallback(function () {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          input = _ref.input;\n\n      return hook.fetcher({\n        input: input,\n        options: hook.fetchOptions,\n        fetch: fetcher\n      });\n    }, [fetcher, hook.fetchOptions])\n  });\n}\n\n_s4(useMutationHook, \"3kdw6MEI4SBUuzlnPjLgMJ/h6U4=\", true, function () {\n  return [useFetcher];\n});","map":{"version":3,"sources":["/Users/thejmdw/workspace/websites/next-commerce-test/framework/commerce/utils/use-hook.ts"],"names":["useCallback","useCommerce","useData","useFetcher","providerRef","fetcherRef","current","fetcher","useHook","fn","provider","useSWRHook","hook","ctx","response","input","swrOptions","useMutationHook","fetch","options","fetchOptions"],"mappings":";;;;;AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,SAAmBC,WAAnB,QAAsC,IAAtC;AAEA,OAAOC,QAAP,MAAoB,YAApB;AAEA,OAAO,SAASC,UAAT,GAAsB;AAAA;;AAAA;;AAAA,qBACSF,WAAW,EADpB;AAAA,MACnBG,WADmB,gBACnBA,WADmB;AAAA,MACNC,UADM,gBACNA,UADM;;AAE3B,kCAAOD,WAAW,CAACE,OAAZ,CAAoBC,OAA3B,yEAAsCF,UAAU,CAACC,OAAjD;AACD;;GAHeH,U;UACsBF,W;;;AAItC,OAAO,SAASO,OAAT,CAGLC,EAHK,EAGmB;AAAA;;AAAA,sBACAR,WAAW,EADX;AAAA,MAChBG,WADgB,iBAChBA,WADgB;;AAExB,MAAMM,QAAQ,GAAGN,WAAW,CAACE,OAA7B;AACA,SAAOG,EAAE,CAACC,QAAD,CAAT;AACD;;IAPeF,O;UAIUP,W;;;AAK1B,OAAO,SAASU,UAAT,CACLC,IADK,EAEL;AAAA;;AACA,MAAML,OAAO,GAAGJ,UAAU,EAA1B;AAEA,SAAOS,IAAI,CAACJ,OAAL,CAAa;AAClBN,IAAAA,OADkB,mBACVW,GADU,EACL;AAAA;;AACX,UAAMC,QAAQ,GAAGZ,QAAO,CAACU,IAAD,gBAAOC,GAAP,aAAOA,GAAP,uBAAOA,GAAG,CAAEE,KAAZ,mDAAqB,EAArB,EAAyBR,OAAzB,EAAkCM,GAAlC,aAAkCA,GAAlC,uBAAkCA,GAAG,CAAEG,UAAvC,CAAxB;;AACA,aAAOF,QAAP;AACD;AAJiB,GAAb,CAAP;AAMD;;IAXeH,U;UAGER,U;;;AAUlB,OAAO,SAASc,eAAT,CACLL,IADK,EAEL;AAAA;;AACA,MAAML,OAAO,GAAGJ,UAAU,EAA1B;AAEA,SAAOS,IAAI,CAACJ,OAAL,CAAa;AAClBU,IAAAA,KAAK,EAAElB,WAAW,CAChB,YAAoB;AAAA,qFAAP,EAAO;AAAA,UAAjBe,KAAiB,QAAjBA,KAAiB;;AAClB,aAAOH,IAAI,CAACL,OAAL,CAAa;AAClBQ,QAAAA,KAAK,EAALA,KADkB;AAElBI,QAAAA,OAAO,EAAEP,IAAI,CAACQ,YAFI;AAGlBF,QAAAA,KAAK,EAAEX;AAHW,OAAb,CAAP;AAKD,KAPe,EAQhB,CAACA,OAAD,EAAUK,IAAI,CAACQ,YAAf,CARgB;AADA,GAAb,CAAP;AAYD;;IAjBeH,e;UAGEd,U","sourcesContent":["import { useCallback } from 'react'\nimport { Provider, useCommerce } from '..'\nimport type { MutationHook, PickRequired, SWRHook } from './types'\nimport useData from './use-data'\n\nexport function useFetcher() {\n  const { providerRef, fetcherRef } = useCommerce()\n  return providerRef.current.fetcher ?? fetcherRef.current\n}\n\nexport function useHook<\n  P extends Provider,\n  H extends MutationHook<any, any, any> | SWRHook<any, any, any>\n>(fn: (provider: P) => H) {\n  const { providerRef } = useCommerce<P>()\n  const provider = providerRef.current\n  return fn(provider)\n}\n\nexport function useSWRHook<H extends SWRHook<any, any, any>>(\n  hook: PickRequired<H, 'fetcher'>\n) {\n  const fetcher = useFetcher()\n\n  return hook.useHook({\n    useData(ctx) {\n      const response = useData(hook, ctx?.input ?? [], fetcher, ctx?.swrOptions)\n      return response\n    },\n  })\n}\n\nexport function useMutationHook<H extends MutationHook<any, any, any>>(\n  hook: PickRequired<H, 'fetcher'>\n) {\n  const fetcher = useFetcher()\n\n  return hook.useHook({\n    fetch: useCallback(\n      ({ input } = {}) => {\n        return hook.fetcher({\n          input,\n          options: hook.fetchOptions,\n          fetch: fetcher,\n        })\n      },\n      [fetcher, hook.fetchOptions]\n    ),\n  })\n}\n"]},"metadata":{},"sourceType":"module"}