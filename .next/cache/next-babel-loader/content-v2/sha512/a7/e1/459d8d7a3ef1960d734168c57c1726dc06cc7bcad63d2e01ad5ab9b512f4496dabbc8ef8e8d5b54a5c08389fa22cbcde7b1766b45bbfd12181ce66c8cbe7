{"ast":null,"code":"import _defineProperty from \"/Users/thejmdw/workspace/websites/next-commerce-test/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/thejmdw/workspace/websites/next-commerce-test/components/common/UserNav/DropdownMenu.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport cn from 'classnames';\nimport Link from 'next/link';\nimport { useRef, useState, useEffect } from 'react';\nimport { useTheme } from 'next-themes';\nimport { useRouter } from 'next/router';\nimport s from './DropdownMenu.module.css';\nimport { Avatar } from '@components/common';\nimport { Moon, Sun } from '@components/icons';\nimport { useUI } from '@components/ui/context';\nimport ClickOutside from '@lib/click-outside';\nimport useLogout from '@framework/auth/use-logout';\nimport { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from 'body-scroll-lock';\nvar LINKS = [{\n  name: 'My Orders',\n  href: '/orders'\n}, {\n  name: 'My Profile',\n  href: '/profile'\n}, {\n  name: 'My Cart',\n  href: '/cart'\n}];\n\nvar DropdownMenu = function DropdownMenu(_ref) {\n  _s();\n\n  var _ref$open = _ref.open,\n      open = _ref$open === void 0 ? false : _ref$open;\n  var logout = useLogout();\n\n  var _useRouter = useRouter(),\n      pathname = _useRouter.pathname;\n\n  var _useTheme = useTheme(),\n      theme = _useTheme.theme,\n      setTheme = _useTheme.setTheme;\n\n  var _useState = useState(false),\n      display = _useState[0],\n      setDisplay = _useState[1];\n\n  var _useUI = useUI(),\n      closeSidebarIfPresent = _useUI.closeSidebarIfPresent;\n\n  var ref = useRef();\n  useEffect(function () {\n    if (ref.current) {\n      if (display) {\n        disableBodyScroll(ref.current);\n      } else {\n        enableBodyScroll(ref.current);\n      }\n    }\n\n    return function () {\n      clearAllBodyScrollLocks();\n    };\n  }, [display]);\n  return /*#__PURE__*/_jsxDEV(ClickOutside, {\n    active: display,\n    onClick: function onClick() {\n      return setDisplay(false);\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: s.avatarButton,\n        onClick: function onClick() {\n          return setDisplay(!display);\n        },\n        \"aria-label\": \"Menu\",\n        children: /*#__PURE__*/_jsxDEV(Avatar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, _this), display && /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: s.dropdownMenu,\n        ref: ref,\n        children: [LINKS.map(function (_ref2) {\n          var name = _ref2.name,\n              href = _ref2.href;\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                href: href,\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  className: cn(s.link, _defineProperty({}, s.active, pathname === href)),\n                  onClick: function onClick() {\n                    setDisplay(false);\n                    closeSidebarIfPresent();\n                  },\n                  children: name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, _this)\n          }, href, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, _this);\n        }), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: cn(s.link, 'justify-between'),\n            onClick: function onClick() {\n              theme === 'dark' ? setTheme('light') : setTheme('dark');\n              setDisplay(false);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Theme: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: theme\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 26\n              }, _this), ' ']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ml-3\",\n              children: theme == 'dark' ? /*#__PURE__*/_jsxDEV(Moon, {\n                width: 20,\n                height: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 21\n              }, _this) : /*#__PURE__*/_jsxDEV(Sun, {\n                width: \"20\",\n                height: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: cn(s.link, 'border-t border-accents-2 mt-4'),\n            onClick: function onClick() {\n              return logout();\n            },\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(DropdownMenu, \"F/rC1Ozqv/WpjNutgrrGGVmTb7s=\", false, function () {\n  return [useLogout, useRouter, useTheme, useUI];\n});\n\n_c = DropdownMenu;\nexport default DropdownMenu;\n\nvar _c;\n\n$RefreshReg$(_c, \"DropdownMenu\");","map":{"version":3,"sources":["/Users/thejmdw/workspace/websites/next-commerce-test/components/common/UserNav/DropdownMenu.tsx"],"names":["cn","Link","useRef","useState","useEffect","useTheme","useRouter","s","Avatar","Moon","Sun","useUI","ClickOutside","useLogout","disableBodyScroll","enableBodyScroll","clearAllBodyScrollLocks","LINKS","name","href","DropdownMenu","open","logout","pathname","theme","setTheme","display","setDisplay","closeSidebarIfPresent","ref","current","avatarButton","dropdownMenu","map","link","active"],"mappings":"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","sourcesContent":["import cn from 'classnames'\nimport Link from 'next/link'\nimport { FC, useRef, useState, useEffect } from 'react'\nimport { useTheme } from 'next-themes'\nimport { useRouter } from 'next/router'\nimport s from './DropdownMenu.module.css'\nimport { Avatar } from '@components/common'\nimport { Moon, Sun } from '@components/icons'\nimport { useUI } from '@components/ui/context'\nimport ClickOutside from '@lib/click-outside'\nimport useLogout from '@framework/auth/use-logout'\n\nimport {\n  disableBodyScroll,\n  enableBodyScroll,\n  clearAllBodyScrollLocks,\n} from 'body-scroll-lock'\n\ninterface DropdownMenuProps {\n  open?: boolean\n}\n\nconst LINKS = [\n  {\n    name: 'My Orders',\n    href: '/orders',\n  },\n  {\n    name: 'My Profile',\n    href: '/profile',\n  },\n  {\n    name: 'My Cart',\n    href: '/cart',\n  },\n]\n\nconst DropdownMenu: FC<DropdownMenuProps> = ({ open = false }) => {\n  const logout = useLogout()\n  const { pathname } = useRouter()\n  const { theme, setTheme } = useTheme()\n  const [display, setDisplay] = useState(false)\n  const { closeSidebarIfPresent } = useUI()\n  const ref = useRef() as React.MutableRefObject<HTMLUListElement>\n\n  useEffect(() => {\n    if (ref.current) {\n      if (display) {\n        disableBodyScroll(ref.current)\n      } else {\n        enableBodyScroll(ref.current)\n      }\n    }\n    return () => {\n      clearAllBodyScrollLocks()\n    }\n  }, [display])\n\n  return (\n    <ClickOutside active={display} onClick={() => setDisplay(false)}>\n      <div>\n        <button\n          className={s.avatarButton}\n          onClick={() => setDisplay(!display)}\n          aria-label=\"Menu\"\n        >\n          <Avatar />\n        </button>\n        {display && (\n          <ul className={s.dropdownMenu} ref={ref}>\n            {LINKS.map(({ name, href }) => (\n              <li key={href}>\n                <div>\n                  <Link href={href}>\n                    <a\n                      className={cn(s.link, {\n                        [s.active]: pathname === href,\n                      })}\n                      onClick={() => {\n                        setDisplay(false)\n                        closeSidebarIfPresent()\n                      }}\n                    >\n                      {name}\n                    </a>\n                  </Link>\n                </div>\n              </li>\n            ))}\n            <li>\n              <a\n                className={cn(s.link, 'justify-between')}\n                onClick={() => {\n                  theme === 'dark' ? setTheme('light') : setTheme('dark')\n                  setDisplay(false)\n                }}\n              >\n                <div>\n                  Theme: <strong>{theme}</strong>{' '}\n                </div>\n                <div className=\"ml-3\">\n                  {theme == 'dark' ? (\n                    <Moon width={20} height={20} />\n                  ) : (\n                    <Sun width=\"20\" height={20} />\n                  )}\n                </div>\n              </a>\n            </li>\n            <li>\n              <a\n                className={cn(s.link, 'border-t border-accents-2 mt-4')}\n                onClick={() => logout()}\n              >\n                Logout\n              </a>\n            </li>\n          </ul>\n        )}\n      </div>\n    </ClickOutside>\n  )\n}\n\nexport default DropdownMenu\n"]},"metadata":{},"sourceType":"module"}