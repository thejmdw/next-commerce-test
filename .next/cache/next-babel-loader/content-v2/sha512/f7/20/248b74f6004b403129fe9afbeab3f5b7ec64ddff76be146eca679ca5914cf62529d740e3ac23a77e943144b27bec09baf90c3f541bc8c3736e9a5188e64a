{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/thejmdw/workspace/websites/next-commerce-test/pages/search.tsx\";\nimport cn from 'classnames';\nimport Link from 'next/link';\nimport { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { Layout } from '@components/common';\nimport { ProductCard } from '@components/product';\nimport { Container, Grid, Skeleton } from '@components/ui';\nimport { getConfig } from '@framework/api';\nimport useSearch from '@framework/product/use-search';\nimport getAllPages from '@framework/common/get-all-pages';\nimport getSiteInfo from '@framework/common/get-site-info';\nimport rangeMap from '@lib/range-map'; // TODO(bc) Remove this. This should come from the API\n\nimport getSlug from '@lib/get-slug'; // TODO (bc) : Remove or standarize this.\n\nconst SORT = Object.entries({\n  'latest-desc': 'Latest arrivals',\n  'trending-desc': 'Trending',\n  'price-asc': 'Price: Low to high',\n  'price-desc': 'Price: High to low'\n});\nimport { filterQuery, getCategoryPath, getDesignerPath, useSearchMeta } from '@lib/search';\nexport async function getStaticProps({\n  preview,\n  locale\n}) {\n  const config = getConfig({\n    locale\n  });\n  const {\n    pages\n  } = await getAllPages({\n    config,\n    preview\n  });\n  const {\n    categories,\n    brands\n  } = await getSiteInfo({\n    config,\n    preview\n  });\n  return {\n    props: {\n      pages,\n      categories,\n      brands\n    }\n  };\n}\nexport default function Search({\n  categories,\n  brands\n}) {\n  var _brands$find;\n\n  const {\n    0: activeFilter,\n    1: setActiveFilter\n  } = useState('');\n  const {\n    0: toggleFilter,\n    1: setToggleFilter\n  } = useState(false);\n  const router = useRouter();\n  const {\n    asPath\n  } = router;\n  const {\n    q,\n    sort\n  } = router.query; // `q` can be included but because categories and designers can't be searched\n  // in the same way of products, it's better to ignore the search input if one\n  // of those is selected\n\n  const query = filterQuery({\n    sort\n  });\n  const {\n    pathname,\n    category,\n    brand\n  } = useSearchMeta(asPath);\n  const activeCategory = categories.find(cat => getSlug(cat.path) === category);\n  const activeBrand = (_brands$find = brands.find(b => getSlug(b.node.path) === `brands/${brand}`)) === null || _brands$find === void 0 ? void 0 : _brands$find.node;\n  const {\n    data\n  } = useSearch({\n    search: typeof q === 'string' ? q : '',\n    categoryId: activeCategory === null || activeCategory === void 0 ? void 0 : activeCategory.entityId,\n    brandId: activeBrand === null || activeBrand === void 0 ? void 0 : activeBrand.entityId,\n    sort: typeof sort === 'string' ? sort : ''\n  });\n\n  const handleClick = (event, filter) => {\n    if (filter !== activeFilter) {\n      setToggleFilter(true);\n    } else {\n      setToggleFilter(!toggleFilter);\n    }\n\n    setActiveFilter(filter);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-12 gap-4 mt-3 mb-20\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-8 lg:col-span-2 order-1 lg:order-none\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative inline-block w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lg:hidden\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"rounded-md shadow-sm\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: e => handleClick(e, 'categories'),\n                className: \"flex justify-between w-full rounded-sm border border-gray-300 px-4 py-3 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-normal active:bg-gray-50 active:text-gray-800 transition ease-in-out duration-150\",\n                id: \"options-menu\",\n                \"aria-haspopup\": \"true\",\n                \"aria-expanded\": \"true\",\n                children: [activeCategory !== null && activeCategory !== void 0 && activeCategory.name ? `Category: ${activeCategory === null || activeCategory === void 0 ? void 0 : activeCategory.name}` : 'All Categories', /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"-mr-1 ml-2 h-5 w-5\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 20 20\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\",\n                    clipRule: \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `origin-top-left absolute lg:relative left-0 mt-2 w-full rounded-md shadow-lg lg:shadow-none z-10 mb-10 lg:block ${activeFilter !== 'categories' || toggleFilter !== true ? 'hidden' : ''}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-sm bg-white shadow-xs lg:bg-none lg:shadow-none\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                role: \"menu\",\n                \"aria-orientation\": \"vertical\",\n                \"aria-labelledby\": \"options-menu\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    className: cn('block text-sm leading-5 text-gray-700 lg:text-base lg:no-underline lg:font-bold lg:tracking-wide hover:bg-gray-100 lg:hover:bg-transparent hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900', {\n                      underline: !(activeCategory !== null && activeCategory !== void 0 && activeCategory.name)\n                    }),\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      href: {\n                        pathname: getCategoryPath('', brand),\n                        query\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        onClick: e => handleClick(e, 'categories'),\n                        className: 'block lg:inline-block px-4 py-2 lg:p-0 lg:my-2 lg:mx-4',\n                        children: \"All Categories\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 151,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 148,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 140,\n                    columnNumber: 21\n                  }, this), categories.map(cat => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: cn('block text-sm leading-5 text-gray-700 hover:bg-gray-100 lg:hover:bg-transparent hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900', {\n                      underline: (activeCategory === null || activeCategory === void 0 ? void 0 : activeCategory.entityId) === cat.entityId\n                    }),\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      href: {\n                        pathname: getCategoryPath(cat.path, brand),\n                        query\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        onClick: e => handleClick(e, 'categories'),\n                        className: 'block lg:inline-block px-4 py-2 lg:p-0 lg:my-2 lg:mx-4',\n                        children: cat.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 178,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 172,\n                      columnNumber: 25\n                    }, this)\n                  }, cat.path, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative inline-block w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lg:hidden mt-3\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"rounded-md shadow-sm\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: e => handleClick(e, 'brands'),\n                className: \"flex justify-between w-full rounded-sm border border-gray-300 px-4 py-3 bg-white text-sm leading-5 font-medium text-gray-900 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-normal active:bg-gray-50 active:text-gray-800 transition ease-in-out duration-150\",\n                id: \"options-menu\",\n                \"aria-haspopup\": \"true\",\n                \"aria-expanded\": \"true\",\n                children: [activeBrand !== null && activeBrand !== void 0 && activeBrand.name ? `Design: ${activeBrand === null || activeBrand === void 0 ? void 0 : activeBrand.name}` : 'All Designs', /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"-mr-1 ml-2 h-5 w-5\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 20 20\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\",\n                    clipRule: \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `origin-top-left absolute lg:relative left-0 mt-2 w-full rounded-md shadow-lg lg:shadow-none z-10 mb-10 lg:block ${activeFilter !== 'brands' || toggleFilter !== true ? 'hidden' : ''}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-sm bg-white shadow-xs lg:bg-none lg:shadow-none\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                role: \"menu\",\n                \"aria-orientation\": \"vertical\",\n                \"aria-labelledby\": \"options-menu\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    className: cn('block text-sm leading-5 text-gray-700 lg:text-base lg:no-underline lg:font-bold lg:tracking-wide hover:bg-gray-100 lg:hover:bg-transparent hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900', {\n                      underline: !(activeBrand !== null && activeBrand !== void 0 && activeBrand.name)\n                    }),\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      href: {\n                        pathname: getDesignerPath('', category),\n                        query\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        onClick: e => handleClick(e, 'brands'),\n                        className: 'block lg:inline-block px-4 py-2 lg:p-0 lg:my-2 lg:mx-4',\n                        children: \"All Designers\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 253,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 247,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 21\n                  }, this), brands.flatMap(({\n                    node\n                  }) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: cn('block text-sm leading-5 text-gray-700 hover:bg-gray-100 lg:hover:bg-transparent hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900', {\n                      // @ts-ignore Shopify - Fix this types\n                      underline: (activeBrand === null || activeBrand === void 0 ? void 0 : activeBrand.entityId) === node.entityId\n                    }),\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      href: {\n                        pathname: getDesignerPath(node.path, category),\n                        query\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        onClick: e => handleClick(e, 'brands'),\n                        className: 'block lg:inline-block px-4 py-2 lg:p-0 lg:my-2 lg:mx-4',\n                        children: node.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 280,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 25\n                    }, this)\n                  }, node.path, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-8 order-3 lg:order-none\",\n        children: [(q || activeCategory || activeBrand) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-12 transition ease-in duration-75\",\n          children: data ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: cn('animated', {\n                fadeIn: data.found,\n                hidden: !data.found\n              }),\n              children: [\"Showing \", data.products.length, \" results\", ' ', q && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [\"for \\\"\", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: q\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 30\n                }, this), \"\\\"\"]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: cn('animated', {\n                fadeIn: !data.found,\n                hidden: data.found\n              }),\n              children: q ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [\"There are no products that match \\\"\", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: q\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 59\n                }, this), \"\\\"\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: \"There are no products that match the selected category & designer\"\n              }, void 0, false)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) : q ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"Searching for: \\\"\", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: q\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 35\n            }, this), \"\\\"\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: \"Searching...\"\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this), data ? /*#__PURE__*/_jsxDEV(Grid, {\n          layout: \"normal\",\n          children: data.products.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n            variant: \"simple\",\n            className: \"animated fadeIn\",\n            product: product,\n            imgProps: {\n              width: 480,\n              height: 480\n            }\n          }, product.path, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n          layout: \"normal\",\n          children: rangeMap(12, i => /*#__PURE__*/_jsxDEV(Skeleton, {\n            className: \"w-full animated fadeIn\",\n            height: 325\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-8 lg:col-span-2 order-2 lg:order-none\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative inline-block w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lg:hidden\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"rounded-md shadow-sm\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: e => handleClick(e, 'sort'),\n                className: \"flex justify-between w-full rounded-sm border border-gray-300 px-4 py-3 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-normal active:bg-gray-50 active:text-gray-800 transition ease-in-out duration-150\",\n                id: \"options-menu\",\n                \"aria-haspopup\": \"true\",\n                \"aria-expanded\": \"true\",\n                children: [sort ? `Sort: ${sort}` : 'Relevance', /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"-mr-1 ml-2 h-5 w-5\",\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 20 20\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\",\n                    clipRule: \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 392,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `origin-top-left absolute lg:relative left-0 mt-2 w-full rounded-md shadow-lg lg:shadow-none z-10 mb-10 lg:block ${activeFilter !== 'sort' || toggleFilter !== true ? 'hidden' : ''}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-sm bg-white shadow-xs lg:bg-none lg:shadow-none\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                role: \"menu\",\n                \"aria-orientation\": \"vertical\",\n                \"aria-labelledby\": \"options-menu\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    className: cn('block text-sm leading-5 text-gray-700 lg:text-base lg:no-underline lg:font-bold lg:tracking-wide hover:bg-gray-100 lg:hover:bg-transparent hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900', {\n                      underline: !sort\n                    }),\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      href: {\n                        pathname,\n                        query: filterQuery({\n                          q\n                        })\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        onClick: e => handleClick(e, 'sort'),\n                        className: 'block lg:inline-block px-4 py-2 lg:p-0 lg:my-2 lg:mx-4',\n                        children: \"Relevance\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 422,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 421,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 21\n                  }, this), SORT.map(([key, text]) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: cn('block text-sm leading-5 text-gray-700 hover:bg-gray-100 lg:hover:bg-transparent hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900', {\n                      underline: sort === key\n                    }),\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      href: {\n                        pathname,\n                        query: filterQuery({\n                          q,\n                          sort: key\n                        })\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        onClick: e => handleClick(e, 'sort'),\n                        className: 'block lg:inline-block px-4 py-2 lg:p-0 lg:my-2 lg:mx-4',\n                        children: text\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 448,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 442,\n                      columnNumber: 25\n                    }, this)\n                  }, key, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 433,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\nSearch.Layout = Layout;","map":{"version":3,"sources":["/Users/thejmdw/workspace/websites/next-commerce-test/pages/search.tsx"],"names":["cn","Link","useState","useRouter","Layout","ProductCard","Container","Grid","Skeleton","getConfig","useSearch","getAllPages","getSiteInfo","rangeMap","getSlug","SORT","Object","entries","filterQuery","getCategoryPath","getDesignerPath","useSearchMeta","getStaticProps","preview","locale","config","pages","categories","brands","props","Search","activeFilter","setActiveFilter","toggleFilter","setToggleFilter","router","asPath","q","sort","query","pathname","category","brand","activeCategory","find","cat","path","activeBrand","b","node","data","search","categoryId","entityId","brandId","handleClick","event","filter","e","name","underline","map","flatMap","fadeIn","found","hidden","products","length","product","width","height","i","key","text"],"mappings":";;;AAAA,OAAOA,EAAP,MAAe,YAAf;AAEA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,SAASC,SAAT,QAA0B,aAA1B;AAEA,SAASC,MAAT,QAAuB,oBAAvB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,SAAT,EAAoBC,IAApB,EAA0BC,QAA1B,QAA0C,gBAA1C;AAEA,SAASC,SAAT,QAA0B,gBAA1B;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,OAAOC,WAAP,MAAwB,iCAAxB;AACA,OAAOC,WAAP,MAAwB,iCAAxB;AAEA,OAAOC,QAAP,MAAqB,gBAArB,C,CAEA;;AACA,OAAOC,OAAP,MAAoB,eAApB,C,CAEA;;AACA,MAAMC,IAAI,GAAGC,MAAM,CAACC,OAAP,CAAe;AAC1B,iBAAe,iBADW;AAE1B,mBAAiB,UAFS;AAG1B,eAAa,oBAHa;AAI1B,gBAAc;AAJY,CAAf,CAAb;AAOA,SACEC,WADF,EAEEC,eAFF,EAGEC,eAHF,EAIEC,aAJF,QAKO,aALP;AAQA,OAAO,eAAeC,cAAf,CAA8B;AACnCC,EAAAA,OADmC;AAEnCC,EAAAA;AAFmC,CAA9B,EAGmB;AACxB,QAAMC,MAAM,GAAGhB,SAAS,CAAC;AAAEe,IAAAA;AAAF,GAAD,CAAxB;AACA,QAAM;AAAEE,IAAAA;AAAF,MAAY,MAAMf,WAAW,CAAC;AAAEc,IAAAA,MAAF;AAAUF,IAAAA;AAAV,GAAD,CAAnC;AACA,QAAM;AAAEI,IAAAA,UAAF;AAAcC,IAAAA;AAAd,MAAyB,MAAMhB,WAAW,CAAC;AAAEa,IAAAA,MAAF;AAAUF,IAAAA;AAAV,GAAD,CAAhD;AACA,SAAO;AACLM,IAAAA,KAAK,EAAE;AACLH,MAAAA,KADK;AAELC,MAAAA,UAFK;AAGLC,MAAAA;AAHK;AADF,GAAP;AAOD;AAED,eAAe,SAASE,MAAT,CAAgB;AAC7BH,EAAAA,UAD6B;AAE7BC,EAAAA;AAF6B,CAAhB,EAGoC;AAAA;;AACjD,QAAM;AAAA,OAACG,YAAD;AAAA,OAAeC;AAAf,MAAkC9B,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM;AAAA,OAAC+B,YAAD;AAAA,OAAeC;AAAf,MAAkChC,QAAQ,CAAC,KAAD,CAAhD;AAEA,QAAMiC,MAAM,GAAGhC,SAAS,EAAxB;AACA,QAAM;AAAEiC,IAAAA;AAAF,MAAaD,MAAnB;AACA,QAAM;AAAEE,IAAAA,CAAF;AAAKC,IAAAA;AAAL,MAAcH,MAAM,CAACI,KAA3B,CANiD,CAOjD;AACA;AACA;;AACA,QAAMA,KAAK,GAAGrB,WAAW,CAAC;AAAEoB,IAAAA;AAAF,GAAD,CAAzB;AAEA,QAAM;AAAEE,IAAAA,QAAF;AAAYC,IAAAA,QAAZ;AAAsBC,IAAAA;AAAtB,MAAgCrB,aAAa,CAACe,MAAD,CAAnD;AACA,QAAMO,cAAc,GAAGhB,UAAU,CAACiB,IAAX,CACpBC,GAAD,IAAS/B,OAAO,CAAC+B,GAAG,CAACC,IAAL,CAAP,KAAsBL,QADV,CAAvB;AAGA,QAAMM,WAAW,mBAAGnB,MAAM,CAACgB,IAAP,CACjBI,CAAD,IAAOlC,OAAO,CAACkC,CAAC,CAACC,IAAF,CAAOH,IAAR,CAAP,KAA0B,UAASJ,KAAM,EAD9B,CAAH,iDAAG,aAEjBO,IAFH;AAIA,QAAM;AAAEC,IAAAA;AAAF,MAAWxC,SAAS,CAAC;AACzByC,IAAAA,MAAM,EAAE,OAAOd,CAAP,KAAa,QAAb,GAAwBA,CAAxB,GAA4B,EADX;AAEzBe,IAAAA,UAAU,EAAET,cAAF,aAAEA,cAAF,uBAAEA,cAAc,CAAEU,QAFH;AAGzBC,IAAAA,OAAO,EAAEP,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEM,QAHG;AAIzBf,IAAAA,IAAI,EAAE,OAAOA,IAAP,KAAgB,QAAhB,GAA2BA,IAA3B,GAAkC;AAJf,GAAD,CAA1B;;AAOA,QAAMiB,WAAW,GAAG,CAACC,KAAD,EAAaC,MAAb,KAAgC;AAClD,QAAIA,MAAM,KAAK1B,YAAf,EAA6B;AAC3BG,MAAAA,eAAe,CAAC,IAAD,CAAf;AACD,KAFD,MAEO;AACLA,MAAAA,eAAe,CAAC,CAACD,YAAF,CAAf;AACD;;AACDD,IAAAA,eAAe,CAACyB,MAAD,CAAf;AACD,GAPD;;AASA,sBACE,QAAC,SAAD;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,mDAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,gDAAf;AAAA,gCAEE;AAAK,UAAA,SAAS,EAAC,8BAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,WAAf;AAAA,mCACE;AAAM,cAAA,SAAS,EAAC,sBAAhB;AAAA,qCACE;AACE,gBAAA,IAAI,EAAC,QADP;AAEE,gBAAA,OAAO,EAAGC,CAAD,IAAOH,WAAW,CAACG,CAAD,EAAI,YAAJ,CAF7B;AAGE,gBAAA,SAAS,EAAC,kSAHZ;AAIE,gBAAA,EAAE,EAAC,cAJL;AAKE,iCAAc,MALhB;AAME,iCAAc,MANhB;AAAA,2BAQGf,cAAc,SAAd,IAAAA,cAAc,WAAd,IAAAA,cAAc,CAAEgB,IAAhB,GACI,aAAYhB,cAAb,aAAaA,cAAb,uBAAaA,cAAc,CAAEgB,IAAK,EADrC,GAEG,gBAVN,eAWE;AACE,kBAAA,SAAS,EAAC,oBADZ;AAEE,kBAAA,KAAK,EAAC,4BAFR;AAGE,kBAAA,OAAO,EAAC,WAHV;AAIE,kBAAA,IAAI,EAAC,cAJP;AAAA,yCAME;AACE,oBAAA,QAAQ,EAAC,SADX;AAEE,oBAAA,CAAC,EAAC,oHAFJ;AAGE,oBAAA,QAAQ,EAAC;AAHX;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,wBAXF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eA6BE;AACE,YAAA,SAAS,EAAG,mHACV5B,YAAY,KAAK,YAAjB,IAAiCE,YAAY,KAAK,IAAlD,GACI,QADJ,GAEI,EACL,EALH;AAAA,mCAOE;AAAK,cAAA,SAAS,EAAC,yDAAf;AAAA,qCACE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,oCAAiB,UAFnB;AAGE,mCAAgB,cAHlB;AAAA,uCAKE;AAAA,0CACE;AACE,oBAAA,SAAS,EAAEjC,EAAE,CACX,yNADW,EAEX;AACE4D,sBAAAA,SAAS,EAAE,EAACjB,cAAD,aAACA,cAAD,eAACA,cAAc,CAAEgB,IAAjB;AADb,qBAFW,CADf;AAAA,2CAQE,QAAC,IAAD;AACE,sBAAA,IAAI,EAAE;AAAEnB,wBAAAA,QAAQ,EAAErB,eAAe,CAAC,EAAD,EAAKuB,KAAL,CAA3B;AAAwCH,wBAAAA;AAAxC,uBADR;AAAA,6CAGE;AACE,wBAAA,OAAO,EAAGmB,CAAD,IAAOH,WAAW,CAACG,CAAD,EAAI,YAAJ,CAD7B;AAEE,wBAAA,SAAS,EACP,wDAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHF;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA,0BADF,EAsBG/B,UAAU,CAACkC,GAAX,CAAgBhB,GAAD,iBACd;AAEE,oBAAA,SAAS,EAAE7C,EAAE,CACX,8JADW,EAEX;AACE4D,sBAAAA,SAAS,EACP,CAAAjB,cAAc,SAAd,IAAAA,cAAc,WAAd,YAAAA,cAAc,CAAEU,QAAhB,MAA6BR,GAAG,CAACQ;AAFrC,qBAFW,CAFf;AAAA,2CAUE,QAAC,IAAD;AACE,sBAAA,IAAI,EAAE;AACJb,wBAAAA,QAAQ,EAAErB,eAAe,CAAC0B,GAAG,CAACC,IAAL,EAAWJ,KAAX,CADrB;AAEJH,wBAAAA;AAFI,uBADR;AAAA,6CAME;AACE,wBAAA,OAAO,EAAGmB,CAAD,IAAOH,WAAW,CAACG,CAAD,EAAI,YAAJ,CAD7B;AAEE,wBAAA,SAAS,EACP,wDAHJ;AAAA,kCAMGb,GAAG,CAACc;AANP;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA;AAVF,qBACOd,GAAG,CAACC,IADX;AAAA;AAAA;AAAA;AAAA,0BADD,CAtBH;AAAA;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,kBA7BF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAqGE;AAAK,UAAA,SAAS,EAAC,8BAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,gBAAf;AAAA,mCACE;AAAM,cAAA,SAAS,EAAC,sBAAhB;AAAA,qCACE;AACE,gBAAA,IAAI,EAAC,QADP;AAEE,gBAAA,OAAO,EAAGY,CAAD,IAAOH,WAAW,CAACG,CAAD,EAAI,QAAJ,CAF7B;AAGE,gBAAA,SAAS,EAAC,kSAHZ;AAIE,gBAAA,EAAE,EAAC,cAJL;AAKE,iCAAc,MALhB;AAME,iCAAc,MANhB;AAAA,2BAQGX,WAAW,SAAX,IAAAA,WAAW,WAAX,IAAAA,WAAW,CAAEY,IAAb,GACI,WAAUZ,WAAX,aAAWA,WAAX,uBAAWA,WAAW,CAAEY,IAAK,EADhC,GAEG,aAVN,eAWE;AACE,kBAAA,SAAS,EAAC,oBADZ;AAEE,kBAAA,KAAK,EAAC,4BAFR;AAGE,kBAAA,OAAO,EAAC,WAHV;AAIE,kBAAA,IAAI,EAAC,cAJP;AAAA,yCAME;AACE,oBAAA,QAAQ,EAAC,SADX;AAEE,oBAAA,CAAC,EAAC,oHAFJ;AAGE,oBAAA,QAAQ,EAAC;AAHX;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,wBAXF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eA6BE;AACE,YAAA,SAAS,EAAG,mHACV5B,YAAY,KAAK,QAAjB,IAA6BE,YAAY,KAAK,IAA9C,GACI,QADJ,GAEI,EACL,EALH;AAAA,mCAOE;AAAK,cAAA,SAAS,EAAC,yDAAf;AAAA,qCACE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,oCAAiB,UAFnB;AAGE,mCAAgB,cAHlB;AAAA,uCAKE;AAAA,0CACE;AACE,oBAAA,SAAS,EAAEjC,EAAE,CACX,yNADW,EAEX;AACE4D,sBAAAA,SAAS,EAAE,EAACb,WAAD,aAACA,WAAD,eAACA,WAAW,CAAEY,IAAd;AADb,qBAFW,CADf;AAAA,2CAQE,QAAC,IAAD;AACE,sBAAA,IAAI,EAAE;AACJnB,wBAAAA,QAAQ,EAAEpB,eAAe,CAAC,EAAD,EAAKqB,QAAL,CADrB;AAEJF,wBAAAA;AAFI,uBADR;AAAA,6CAME;AACE,wBAAA,OAAO,EAAGmB,CAAD,IAAOH,WAAW,CAACG,CAAD,EAAI,QAAJ,CAD7B;AAEE,wBAAA,SAAS,EACP,wDAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA,0BADF,EAyBG9B,MAAM,CAACkC,OAAP,CAAe,CAAC;AAAEb,oBAAAA;AAAF,mBAAD,kBACd;AAEE,oBAAA,SAAS,EAAEjD,EAAE,CACX,8JADW,EAEX;AACE;AACA4D,sBAAAA,SAAS,EAAE,CAAAb,WAAW,SAAX,IAAAA,WAAW,WAAX,YAAAA,WAAW,CAAEM,QAAb,MAA0BJ,IAAI,CAACI;AAF5C,qBAFW,CAFf;AAAA,2CAUE,QAAC,IAAD;AACE,sBAAA,IAAI,EAAE;AACJb,wBAAAA,QAAQ,EAAEpB,eAAe,CAAC6B,IAAI,CAACH,IAAN,EAAYL,QAAZ,CADrB;AAEJF,wBAAAA;AAFI,uBADR;AAAA,6CAME;AACE,wBAAA,OAAO,EAAGmB,CAAD,IAAOH,WAAW,CAACG,CAAD,EAAI,QAAJ,CAD7B;AAEE,wBAAA,SAAS,EACP,wDAHJ;AAAA,kCAMGT,IAAI,CAACU;AANR;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA;AAVF,qBACOV,IAAI,CAACH,IADZ;AAAA;AAAA;AAAA;AAAA,0BADD,CAzBH;AAAA;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,kBA7BF;AAAA;AAAA;AAAA;AAAA;AAAA,gBArGF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eA4ME;AAAK,QAAA,SAAS,EAAC,kCAAf;AAAA,mBACG,CAACT,CAAC,IAAIM,cAAL,IAAuBI,WAAxB,kBACC;AAAK,UAAA,SAAS,EAAC,sCAAf;AAAA,oBACGG,IAAI,gBACH;AAAA,oCACE;AACE,cAAA,SAAS,EAAElD,EAAE,CAAC,UAAD,EAAa;AACxB+D,gBAAAA,MAAM,EAAEb,IAAI,CAACc,KADW;AAExBC,gBAAAA,MAAM,EAAE,CAACf,IAAI,CAACc;AAFU,eAAb,CADf;AAAA,qCAMWd,IAAI,CAACgB,QAAL,CAAcC,MANzB,cAMyC,GANzC,EAOG9B,CAAC,iBACA;AAAA,kDACO;AAAA,4BAASA;AAAT;AAAA;AAAA;AAAA;AAAA,wBADP;AAAA,8BARJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAcE;AACE,cAAA,SAAS,EAAErC,EAAE,CAAC,UAAD,EAAa;AACxB+D,gBAAAA,MAAM,EAAE,CAACb,IAAI,CAACc,KADU;AAExBC,gBAAAA,MAAM,EAAEf,IAAI,CAACc;AAFW,eAAb,CADf;AAAA,wBAMG3B,CAAC,gBACA;AAAA,+EACoC;AAAA,4BAASA;AAAT;AAAA;AAAA;AAAA;AAAA,wBADpC;AAAA,8BADA,gBAKA;AAAA;AAAA;AAXJ;AAAA;AAAA;AAAA;AAAA,oBAdF;AAAA,0BADG,GAiCDA,CAAC,gBACH;AAAA,yDACkB;AAAA,wBAASA;AAAT;AAAA;AAAA;AAAA;AAAA,oBADlB;AAAA,0BADG,gBAKH;AAAA;AAAA;AAvCJ;AAAA;AAAA;AAAA;AAAA,gBAFJ,EA8CGa,IAAI,gBACH,QAAC,IAAD;AAAM,UAAA,MAAM,EAAC,QAAb;AAAA,oBACGA,IAAI,CAACgB,QAAL,CAAcL,GAAd,CAAmBO,OAAD,iBACjB,QAAC,WAAD;AACE,YAAA,OAAO,EAAC,QADV;AAGE,YAAA,SAAS,EAAC,iBAHZ;AAIE,YAAA,OAAO,EAAEA,OAJX;AAKE,YAAA,QAAQ,EAAE;AACRC,cAAAA,KAAK,EAAE,GADC;AAERC,cAAAA,MAAM,EAAE;AAFA;AALZ,aAEOF,OAAO,CAACtB,IAFf;AAAA;AAAA;AAAA;AAAA,kBADD;AADH;AAAA;AAAA;AAAA;AAAA,gBADG,gBAgBH,QAAC,IAAD;AAAM,UAAA,MAAM,EAAC,QAAb;AAAA,oBACGjC,QAAQ,CAAC,EAAD,EAAM0D,CAAD,iBACZ,QAAC,QAAD;AAEE,YAAA,SAAS,EAAC,wBAFZ;AAGE,YAAA,MAAM,EAAE;AAHV,aACOA,CADP;AAAA;AAAA;AAAA;AAAA,kBADO;AADX;AAAA;AAAA;AAAA;AAAA,gBA9DJ;AAAA;AAAA;AAAA;AAAA;AAAA,cA5MF,eAuRE;AAAK,QAAA,SAAS,EAAC,gDAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,8BAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,WAAf;AAAA,mCACE;AAAM,cAAA,SAAS,EAAC,sBAAhB;AAAA,qCACE;AACE,gBAAA,IAAI,EAAC,QADP;AAEE,gBAAA,OAAO,EAAGb,CAAD,IAAOH,WAAW,CAACG,CAAD,EAAI,MAAJ,CAF7B;AAGE,gBAAA,SAAS,EAAC,kSAHZ;AAIE,gBAAA,EAAE,EAAC,cAJL;AAKE,iCAAc,MALhB;AAME,iCAAc,MANhB;AAAA,2BAQGpB,IAAI,GAAI,SAAQA,IAAK,EAAjB,GAAqB,WAR5B,eASE;AACE,kBAAA,SAAS,EAAC,oBADZ;AAEE,kBAAA,KAAK,EAAC,4BAFR;AAGE,kBAAA,OAAO,EAAC,WAHV;AAIE,kBAAA,IAAI,EAAC,cAJP;AAAA,yCAME;AACE,oBAAA,QAAQ,EAAC,SADX;AAEE,oBAAA,CAAC,EAAC,oHAFJ;AAGE,oBAAA,QAAQ,EAAC;AAHX;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,wBATF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eA2BE;AACE,YAAA,SAAS,EAAG,mHACVP,YAAY,KAAK,MAAjB,IAA2BE,YAAY,KAAK,IAA5C,GAAmD,QAAnD,GAA8D,EAC/D,EAHH;AAAA,mCAKE;AAAK,cAAA,SAAS,EAAC,yDAAf;AAAA,qCACE;AACE,gBAAA,IAAI,EAAC,MADP;AAEE,oCAAiB,UAFnB;AAGE,mCAAgB,cAHlB;AAAA,uCAKE;AAAA,0CACE;AACE,oBAAA,SAAS,EAAEjC,EAAE,CACX,yNADW,EAEX;AACE4D,sBAAAA,SAAS,EAAE,CAACtB;AADd,qBAFW,CADf;AAAA,2CAQE,QAAC,IAAD;AAAM,sBAAA,IAAI,EAAE;AAAEE,wBAAAA,QAAF;AAAYD,wBAAAA,KAAK,EAAErB,WAAW,CAAC;AAAEmB,0BAAAA;AAAF,yBAAD;AAA9B,uBAAZ;AAAA,6CACE;AACE,wBAAA,OAAO,EAAGqB,CAAD,IAAOH,WAAW,CAACG,CAAD,EAAI,MAAJ,CAD7B;AAEE,wBAAA,SAAS,EACP,wDAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA,0BADF,EAoBG3C,IAAI,CAAC8C,GAAL,CAAS,CAAC,CAACW,GAAD,EAAMC,IAAN,CAAD,kBACR;AAEE,oBAAA,SAAS,EAAEzE,EAAE,CACX,8JADW,EAEX;AACE4D,sBAAAA,SAAS,EAAEtB,IAAI,KAAKkC;AADtB,qBAFW,CAFf;AAAA,2CASE,QAAC,IAAD;AACE,sBAAA,IAAI,EAAE;AACJhC,wBAAAA,QADI;AAEJD,wBAAAA,KAAK,EAAErB,WAAW,CAAC;AAAEmB,0BAAAA,CAAF;AAAKC,0BAAAA,IAAI,EAAEkC;AAAX,yBAAD;AAFd,uBADR;AAAA,6CAME;AACE,wBAAA,OAAO,EAAGd,CAAD,IAAOH,WAAW,CAACG,CAAD,EAAI,MAAJ,CAD7B;AAEE,wBAAA,SAAS,EACP,wDAHJ;AAAA,kCAMGe;AANH;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA;AATF,qBACOD,GADP;AAAA;AAAA;AAAA;AAAA,0BADD,CApBH;AAAA;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,kBA3BF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAvRF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAwXD;AAED1C,MAAM,CAAC1B,MAAP,GAAgBA,MAAhB","sourcesContent":["import cn from 'classnames'\nimport type { GetStaticPropsContext, InferGetStaticPropsType } from 'next'\nimport Link from 'next/link'\nimport { useState } from 'react'\nimport { useRouter } from 'next/router'\n\nimport { Layout } from '@components/common'\nimport { ProductCard } from '@components/product'\nimport { Container, Grid, Skeleton } from '@components/ui'\n\nimport { getConfig } from '@framework/api'\nimport useSearch from '@framework/product/use-search'\nimport getAllPages from '@framework/common/get-all-pages'\nimport getSiteInfo from '@framework/common/get-site-info'\n\nimport rangeMap from '@lib/range-map'\n\n// TODO(bc) Remove this. This should come from the API\nimport getSlug from '@lib/get-slug'\n\n// TODO (bc) : Remove or standarize this.\nconst SORT = Object.entries({\n  'latest-desc': 'Latest arrivals',\n  'trending-desc': 'Trending',\n  'price-asc': 'Price: Low to high',\n  'price-desc': 'Price: High to low',\n})\n\nimport {\n  filterQuery,\n  getCategoryPath,\n  getDesignerPath,\n  useSearchMeta,\n} from '@lib/search'\nimport { Product } from '@commerce/types'\n\nexport async function getStaticProps({\n  preview,\n  locale,\n}: GetStaticPropsContext) {\n  const config = getConfig({ locale })\n  const { pages } = await getAllPages({ config, preview })\n  const { categories, brands } = await getSiteInfo({ config, preview })\n  return {\n    props: {\n      pages,\n      categories,\n      brands,\n    },\n  }\n}\n\nexport default function Search({\n  categories,\n  brands,\n}: InferGetStaticPropsType<typeof getStaticProps>) {\n  const [activeFilter, setActiveFilter] = useState('')\n  const [toggleFilter, setToggleFilter] = useState(false)\n\n  const router = useRouter()\n  const { asPath } = router\n  const { q, sort } = router.query\n  // `q` can be included but because categories and designers can't be searched\n  // in the same way of products, it's better to ignore the search input if one\n  // of those is selected\n  const query = filterQuery({ sort })\n\n  const { pathname, category, brand } = useSearchMeta(asPath)\n  const activeCategory = categories.find(\n    (cat) => getSlug(cat.path) === category\n  )\n  const activeBrand = brands.find(\n    (b) => getSlug(b.node.path) === `brands/${brand}`\n  )?.node\n\n  const { data } = useSearch({\n    search: typeof q === 'string' ? q : '',\n    categoryId: activeCategory?.entityId,\n    brandId: activeBrand?.entityId,\n    sort: typeof sort === 'string' ? sort : '',\n  })\n\n  const handleClick = (event: any, filter: string) => {\n    if (filter !== activeFilter) {\n      setToggleFilter(true)\n    } else {\n      setToggleFilter(!toggleFilter)\n    }\n    setActiveFilter(filter)\n  }\n\n  return (\n    <Container>\n      <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-4 mt-3 mb-20\">\n        <div className=\"col-span-8 lg:col-span-2 order-1 lg:order-none\">\n          {/* Categories */}\n          <div className=\"relative inline-block w-full\">\n            <div className=\"lg:hidden\">\n              <span className=\"rounded-md shadow-sm\">\n                <button\n                  type=\"button\"\n                  onClick={(e) => handleClick(e, 'categories')}\n                  className=\"flex justify-between w-full rounded-sm border border-gray-300 px-4 py-3 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-normal active:bg-gray-50 active:text-gray-800 transition ease-in-out duration-150\"\n                  id=\"options-menu\"\n                  aria-haspopup=\"true\"\n                  aria-expanded=\"true\"\n                >\n                  {activeCategory?.name\n                    ? `Category: ${activeCategory?.name}`\n                    : 'All Categories'}\n                  <svg\n                    className=\"-mr-1 ml-2 h-5 w-5\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                </button>\n              </span>\n            </div>\n            <div\n              className={`origin-top-left absolute lg:relative left-0 mt-2 w-full rounded-md shadow-lg lg:shadow-none z-10 mb-10 lg:block ${\n                activeFilter !== 'categories' || toggleFilter !== true\n                  ? 'hidden'\n                  : ''\n              }`}\n            >\n              <div className=\"rounded-sm bg-white shadow-xs lg:bg-none lg:shadow-none\">\n                <div\n                  role=\"menu\"\n                  aria-orientation=\"vertical\"\n                  aria-labelledby=\"options-menu\"\n                >\n                  <ul>\n                    <li\n                      className={cn(\n                        'block text-sm leading-5 text-gray-700 lg:text-base lg:no-underline lg:font-bold lg:tracking-wide hover:bg-gray-100 lg:hover:bg-transparent hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900',\n                        {\n                          underline: !activeCategory?.name,\n                        }\n                      )}\n                    >\n                      <Link\n                        href={{ pathname: getCategoryPath('', brand), query }}\n                      >\n                        <a\n                          onClick={(e) => handleClick(e, 'categories')}\n                          className={\n                            'block lg:inline-block px-4 py-2 lg:p-0 lg:my-2 lg:mx-4'\n                          }\n                        >\n                          All Categories\n                        </a>\n                      </Link>\n                    </li>\n                    {categories.map((cat) => (\n                      <li\n                        key={cat.path}\n                        className={cn(\n                          'block text-sm leading-5 text-gray-700 hover:bg-gray-100 lg:hover:bg-transparent hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900',\n                          {\n                            underline:\n                              activeCategory?.entityId === cat.entityId,\n                          }\n                        )}\n                      >\n                        <Link\n                          href={{\n                            pathname: getCategoryPath(cat.path, brand),\n                            query,\n                          }}\n                        >\n                          <a\n                            onClick={(e) => handleClick(e, 'categories')}\n                            className={\n                              'block lg:inline-block px-4 py-2 lg:p-0 lg:my-2 lg:mx-4'\n                            }\n                          >\n                            {cat.name}\n                          </a>\n                        </Link>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Designs */}\n          <div className=\"relative inline-block w-full\">\n            <div className=\"lg:hidden mt-3\">\n              <span className=\"rounded-md shadow-sm\">\n                <button\n                  type=\"button\"\n                  onClick={(e) => handleClick(e, 'brands')}\n                  className=\"flex justify-between w-full rounded-sm border border-gray-300 px-4 py-3 bg-white text-sm leading-5 font-medium text-gray-900 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-normal active:bg-gray-50 active:text-gray-800 transition ease-in-out duration-150\"\n                  id=\"options-menu\"\n                  aria-haspopup=\"true\"\n                  aria-expanded=\"true\"\n                >\n                  {activeBrand?.name\n                    ? `Design: ${activeBrand?.name}`\n                    : 'All Designs'}\n                  <svg\n                    className=\"-mr-1 ml-2 h-5 w-5\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                </button>\n              </span>\n            </div>\n            <div\n              className={`origin-top-left absolute lg:relative left-0 mt-2 w-full rounded-md shadow-lg lg:shadow-none z-10 mb-10 lg:block ${\n                activeFilter !== 'brands' || toggleFilter !== true\n                  ? 'hidden'\n                  : ''\n              }`}\n            >\n              <div className=\"rounded-sm bg-white shadow-xs lg:bg-none lg:shadow-none\">\n                <div\n                  role=\"menu\"\n                  aria-orientation=\"vertical\"\n                  aria-labelledby=\"options-menu\"\n                >\n                  <ul>\n                    <li\n                      className={cn(\n                        'block text-sm leading-5 text-gray-700 lg:text-base lg:no-underline lg:font-bold lg:tracking-wide hover:bg-gray-100 lg:hover:bg-transparent hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900',\n                        {\n                          underline: !activeBrand?.name,\n                        }\n                      )}\n                    >\n                      <Link\n                        href={{\n                          pathname: getDesignerPath('', category),\n                          query,\n                        }}\n                      >\n                        <a\n                          onClick={(e) => handleClick(e, 'brands')}\n                          className={\n                            'block lg:inline-block px-4 py-2 lg:p-0 lg:my-2 lg:mx-4'\n                          }\n                        >\n                          All Designers\n                        </a>\n                      </Link>\n                    </li>\n                    {brands.flatMap(({ node }) => (\n                      <li\n                        key={node.path}\n                        className={cn(\n                          'block text-sm leading-5 text-gray-700 hover:bg-gray-100 lg:hover:bg-transparent hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900',\n                          {\n                            // @ts-ignore Shopify - Fix this types\n                            underline: activeBrand?.entityId === node.entityId,\n                          }\n                        )}\n                      >\n                        <Link\n                          href={{\n                            pathname: getDesignerPath(node.path, category),\n                            query,\n                          }}\n                        >\n                          <a\n                            onClick={(e) => handleClick(e, 'brands')}\n                            className={\n                              'block lg:inline-block px-4 py-2 lg:p-0 lg:my-2 lg:mx-4'\n                            }\n                          >\n                            {node.name}\n                          </a>\n                        </Link>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        {/* Products */}\n        <div className=\"col-span-8 order-3 lg:order-none\">\n          {(q || activeCategory || activeBrand) && (\n            <div className=\"mb-12 transition ease-in duration-75\">\n              {data ? (\n                <>\n                  <span\n                    className={cn('animated', {\n                      fadeIn: data.found,\n                      hidden: !data.found,\n                    })}\n                  >\n                    Showing {data.products.length} results{' '}\n                    {q && (\n                      <>\n                        for \"<strong>{q}</strong>\"\n                      </>\n                    )}\n                  </span>\n                  <span\n                    className={cn('animated', {\n                      fadeIn: !data.found,\n                      hidden: data.found,\n                    })}\n                  >\n                    {q ? (\n                      <>\n                        There are no products that match \"<strong>{q}</strong>\"\n                      </>\n                    ) : (\n                      <>\n                        There are no products that match the selected category &\n                        designer\n                      </>\n                    )}\n                  </span>\n                </>\n              ) : q ? (\n                <>\n                  Searching for: \"<strong>{q}</strong>\"\n                </>\n              ) : (\n                <>Searching...</>\n              )}\n            </div>\n          )}\n\n          {data ? (\n            <Grid layout=\"normal\">\n              {data.products.map((product: Product) => (\n                <ProductCard\n                  variant=\"simple\"\n                  key={product.path}\n                  className=\"animated fadeIn\"\n                  product={product}\n                  imgProps={{\n                    width: 480,\n                    height: 480,\n                  }}\n                />\n              ))}\n            </Grid>\n          ) : (\n            <Grid layout=\"normal\">\n              {rangeMap(12, (i) => (\n                <Skeleton\n                  key={i}\n                  className=\"w-full animated fadeIn\"\n                  height={325}\n                />\n              ))}\n            </Grid>\n          )}\n        </div>\n\n        {/* Sort */}\n        <div className=\"col-span-8 lg:col-span-2 order-2 lg:order-none\">\n          <div className=\"relative inline-block w-full\">\n            <div className=\"lg:hidden\">\n              <span className=\"rounded-md shadow-sm\">\n                <button\n                  type=\"button\"\n                  onClick={(e) => handleClick(e, 'sort')}\n                  className=\"flex justify-between w-full rounded-sm border border-gray-300 px-4 py-3 bg-white text-sm leading-5 font-medium text-gray-700 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-normal active:bg-gray-50 active:text-gray-800 transition ease-in-out duration-150\"\n                  id=\"options-menu\"\n                  aria-haspopup=\"true\"\n                  aria-expanded=\"true\"\n                >\n                  {sort ? `Sort: ${sort}` : 'Relevance'}\n                  <svg\n                    className=\"-mr-1 ml-2 h-5 w-5\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                </button>\n              </span>\n            </div>\n            <div\n              className={`origin-top-left absolute lg:relative left-0 mt-2 w-full rounded-md shadow-lg lg:shadow-none z-10 mb-10 lg:block ${\n                activeFilter !== 'sort' || toggleFilter !== true ? 'hidden' : ''\n              }`}\n            >\n              <div className=\"rounded-sm bg-white shadow-xs lg:bg-none lg:shadow-none\">\n                <div\n                  role=\"menu\"\n                  aria-orientation=\"vertical\"\n                  aria-labelledby=\"options-menu\"\n                >\n                  <ul>\n                    <li\n                      className={cn(\n                        'block text-sm leading-5 text-gray-700 lg:text-base lg:no-underline lg:font-bold lg:tracking-wide hover:bg-gray-100 lg:hover:bg-transparent hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900',\n                        {\n                          underline: !sort,\n                        }\n                      )}\n                    >\n                      <Link href={{ pathname, query: filterQuery({ q }) }}>\n                        <a\n                          onClick={(e) => handleClick(e, 'sort')}\n                          className={\n                            'block lg:inline-block px-4 py-2 lg:p-0 lg:my-2 lg:mx-4'\n                          }\n                        >\n                          Relevance\n                        </a>\n                      </Link>\n                    </li>\n                    {SORT.map(([key, text]) => (\n                      <li\n                        key={key}\n                        className={cn(\n                          'block text-sm leading-5 text-gray-700 hover:bg-gray-100 lg:hover:bg-transparent hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900',\n                          {\n                            underline: sort === key,\n                          }\n                        )}\n                      >\n                        <Link\n                          href={{\n                            pathname,\n                            query: filterQuery({ q, sort: key }),\n                          }}\n                        >\n                          <a\n                            onClick={(e) => handleClick(e, 'sort')}\n                            className={\n                              'block lg:inline-block px-4 py-2 lg:p-0 lg:my-2 lg:mx-4'\n                            }\n                          >\n                            {text}\n                          </a>\n                        </Link>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Container>\n  )\n}\n\nSearch.Layout = Layout\n"]},"metadata":{},"sourceType":"module"}