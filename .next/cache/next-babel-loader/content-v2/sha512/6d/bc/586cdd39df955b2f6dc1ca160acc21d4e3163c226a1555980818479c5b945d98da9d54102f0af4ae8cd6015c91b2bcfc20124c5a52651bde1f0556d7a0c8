{"ast":null,"code":"import Cookies from 'js-cookie';\nimport { SHOPIFY_CHECKOUT_ID_COOKIE, SHOPIFY_CHECKOUT_URL_COOKIE, SHOPIFY_COOKIE_EXPIRE } from '../const';\nimport checkoutCreateMutation from './mutations/checkout-create';\nexport const checkoutCreate = async (fetch) => {\n  var _data$checkoutCreate;\n\n  const data = await fetch({\n    query: checkoutCreateMutation\n  });\n  const checkout = (_data$checkoutCreate = data.checkoutCreate) === null || _data$checkoutCreate === void 0 ? void 0 : _data$checkoutCreate.checkout;\n  const checkoutId = checkout === null || checkout === void 0 ? void 0 : checkout.id;\n\n  if (checkoutId) {\n    const options = {\n      expires: SHOPIFY_COOKIE_EXPIRE\n    };\n    Cookies.set(SHOPIFY_CHECKOUT_ID_COOKIE, checkoutId, options);\n    Cookies.set(SHOPIFY_CHECKOUT_URL_COOKIE, checkout.webUrl, options);\n  }\n\n  return checkout;\n};\nexport default checkoutCreate;","map":{"version":3,"sources":["/Users/thejmdw/workspace/websites/next-commerce-test/framework/shopify/utils/checkout-create.ts"],"names":["Cookies","SHOPIFY_CHECKOUT_ID_COOKIE","SHOPIFY_CHECKOUT_URL_COOKIE","SHOPIFY_COOKIE_EXPIRE","checkoutCreateMutation","checkoutCreate","fetch","data","query","checkout","checkoutId","id","options","expires","set","webUrl"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,WAApB;AAEA,SACEC,0BADF,EAEEC,2BAFF,EAGEC,qBAHF,QAIO,UAJP;AAMA,OAAOC,sBAAP,MAAmC,6BAAnC;AAGA,OAAO,MAAMC,cAAc,GAAG,OAC5BC,KAD4B,KAEO;AAAA;;AACnC,QAAMC,IAAI,GAAG,MAAMD,KAAK,CAAC;AACvBE,IAAAA,KAAK,EAAEJ;AADgB,GAAD,CAAxB;AAIA,QAAMK,QAAQ,2BAAGF,IAAI,CAACF,cAAR,yDAAG,qBAAqBI,QAAtC;AACA,QAAMC,UAAU,GAAGD,QAAH,aAAGA,QAAH,uBAAGA,QAAQ,CAAEE,EAA7B;;AAEA,MAAID,UAAJ,EAAgB;AACd,UAAME,OAAO,GAAG;AACdC,MAAAA,OAAO,EAAEV;AADK,KAAhB;AAGAH,IAAAA,OAAO,CAACc,GAAR,CAAYb,0BAAZ,EAAwCS,UAAxC,EAAoDE,OAApD;AACAZ,IAAAA,OAAO,CAACc,GAAR,CAAYZ,2BAAZ,EAAyCO,QAAQ,CAACM,MAAlD,EAA0DH,OAA1D;AACD;;AAED,SAAOH,QAAP;AACD,CAnBM;AAqBP,eAAeJ,cAAf","sourcesContent":["import Cookies from 'js-cookie'\n\nimport {\n  SHOPIFY_CHECKOUT_ID_COOKIE,\n  SHOPIFY_CHECKOUT_URL_COOKIE,\n  SHOPIFY_COOKIE_EXPIRE,\n} from '../const'\n\nimport checkoutCreateMutation from './mutations/checkout-create'\nimport { CheckoutCreatePayload } from '../schema'\n\nexport const checkoutCreate = async (\n  fetch: any\n): Promise<CheckoutCreatePayload> => {\n  const data = await fetch({\n    query: checkoutCreateMutation,\n  })\n\n  const checkout = data.checkoutCreate?.checkout\n  const checkoutId = checkout?.id\n\n  if (checkoutId) {\n    const options = {\n      expires: SHOPIFY_COOKIE_EXPIRE,\n    }\n    Cookies.set(SHOPIFY_CHECKOUT_ID_COOKIE, checkoutId, options)\n    Cookies.set(SHOPIFY_CHECKOUT_URL_COOKIE, checkout.webUrl, options)\n  }\n\n  return checkout\n}\n\nexport default checkoutCreate\n"]},"metadata":{},"sourceType":"module"}