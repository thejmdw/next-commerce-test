{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/thejmdw/workspace/websites/next-commerce-test/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/thejmdw/workspace/websites/next-commerce-test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/thejmdw/workspace/websites/next-commerce-test/components/auth/SignUpView.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useCallback } from 'react';\nimport { validate } from 'email-validator';\nimport { Info } from '@components/icons';\nimport { useUI } from '@components/ui/context';\nimport { Logo, Button, Input } from '@components/ui';\nimport useSignup from '@framework/auth/use-signup';\n\nvar SignUpView = function SignUpView() {\n  _s();\n\n  // Form State\n  var _useState = useState(''),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = useState(''),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useState3 = useState(''),\n      firstName = _useState3[0],\n      setFirstName = _useState3[1];\n\n  var _useState4 = useState(''),\n      lastName = _useState4[0],\n      setLastName = _useState4[1];\n\n  var _useState5 = useState(false),\n      loading = _useState5[0],\n      setLoading = _useState5[1];\n\n  var _useState6 = useState(''),\n      message = _useState6[0],\n      setMessage = _useState6[1];\n\n  var _useState7 = useState(false),\n      dirty = _useState7[0],\n      setDirty = _useState7[1];\n\n  var _useState8 = useState(false),\n      disabled = _useState8[0],\n      setDisabled = _useState8[1];\n\n  var signup = useSignup();\n\n  var _useUI = useUI(),\n      setModalView = _useUI.setModalView,\n      closeModal = _useUI.closeModal;\n\n  var handleSignup = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var errors;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n\n              if (!dirty && !disabled) {\n                setDirty(true);\n                handleValidation();\n              }\n\n              _context.prev = 2;\n              setLoading(true);\n              setMessage('');\n              _context.next = 7;\n              return signup({\n                email: email,\n                firstName: firstName,\n                lastName: lastName,\n                password: password\n              });\n\n            case 7:\n              setLoading(false);\n              closeModal();\n              _context.next = 16;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](2);\n              errors = _context.t0.errors;\n              setMessage(errors[0].message);\n              setLoading(false);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 11]]);\n    }));\n\n    return function handleSignup(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleValidation = useCallback(function () {\n    // Test for Alphanumeric password\n    var validPassword = /^(?=.*[a-zA-Z])(?=.*[0-9])/.test(password); // Unable to send form unless fields are valid.\n\n    if (dirty) {\n      setDisabled(!validate(email) || password.length < 7 || !validPassword);\n    }\n  }, [email, password, dirty]);\n  useEffect(function () {\n    handleValidation();\n  }, [handleValidation]);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSignup,\n    className: \"w-80 flex flex-col justify-between p-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center pb-12 \",\n      children: /*#__PURE__*/_jsxDEV(Logo, {\n        width: \"64px\",\n        height: \"64px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col space-y-4\",\n      children: [message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red border border-red p-3\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"First Name\",\n        onChange: setFirstName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"Last Name\",\n        onChange: setLastName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"email\",\n        placeholder: \"Email\",\n        onChange: setEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"password\",\n        placeholder: \"Password\",\n        onChange: setPassword\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-accents-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"inline-block align-middle \",\n          children: /*#__PURE__*/_jsxDEV(Info, {\n            width: \"15\",\n            height: \"15\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, _this), ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"leading-6 text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Info\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, _this), \": Passwords must be longer than 7 chars and include numbers.\", ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pt-2 w-full flex flex-col\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"slim\",\n          type: \"submit\",\n          loading: loading,\n          disabled: disabled,\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pt-1 text-center text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-accents-7\",\n          children: \"Do you have an account?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, _this), \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"text-accent-9 font-bold hover:underline cursor-pointer\",\n          onClick: function onClick() {\n            return setModalView('LOGIN_VIEW');\n          },\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(SignUpView, \"AZ+kPR51OwPHStiI7DT4Clc3O2E=\", false, function () {\n  return [useSignup, useUI];\n});\n\n_c = SignUpView;\nexport default SignUpView;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUpView\");","map":{"version":3,"sources":["/Users/thejmdw/workspace/websites/next-commerce-test/components/auth/SignUpView.tsx"],"names":["useEffect","useState","useCallback","validate","Info","useUI","Logo","Button","Input","useSignup","SignUpView","email","setEmail","password","setPassword","firstName","setFirstName","lastName","setLastName","loading","setLoading","message","setMessage","dirty","setDirty","disabled","setDisabled","signup","setModalView","closeModal","handleSignup","e","preventDefault","handleValidation","errors","validPassword","test","length"],"mappings":"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","sourcesContent":["import { FC, useEffect, useState, useCallback } from 'react'\nimport { validate } from 'email-validator'\nimport { Info } from '@components/icons'\nimport { useUI } from '@components/ui/context'\nimport { Logo, Button, Input } from '@components/ui'\nimport useSignup from '@framework/auth/use-signup'\n\ninterface Props {}\n\nconst SignUpView: FC<Props> = () => {\n  // Form State\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [firstName, setFirstName] = useState('')\n  const [lastName, setLastName] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [message, setMessage] = useState('')\n  const [dirty, setDirty] = useState(false)\n  const [disabled, setDisabled] = useState(false)\n\n  const signup = useSignup()\n  const { setModalView, closeModal } = useUI()\n\n  const handleSignup = async (e: React.SyntheticEvent<EventTarget>) => {\n    e.preventDefault()\n\n    if (!dirty && !disabled) {\n      setDirty(true)\n      handleValidation()\n    }\n\n    try {\n      setLoading(true)\n      setMessage('')\n      await signup({\n        email,\n        firstName,\n        lastName,\n        password,\n      })\n      setLoading(false)\n      closeModal()\n    } catch ({ errors }) {\n      setMessage(errors[0].message)\n      setLoading(false)\n    }\n  }\n\n  const handleValidation = useCallback(() => {\n    // Test for Alphanumeric password\n    const validPassword = /^(?=.*[a-zA-Z])(?=.*[0-9])/.test(password)\n\n    // Unable to send form unless fields are valid.\n    if (dirty) {\n      setDisabled(!validate(email) || password.length < 7 || !validPassword)\n    }\n  }, [email, password, dirty])\n\n  useEffect(() => {\n    handleValidation()\n  }, [handleValidation])\n\n  return (\n    <form\n      onSubmit={handleSignup}\n      className=\"w-80 flex flex-col justify-between p-3\"\n    >\n      <div className=\"flex justify-center pb-12 \">\n        <Logo width=\"64px\" height=\"64px\" />\n      </div>\n      <div className=\"flex flex-col space-y-4\">\n        {message && (\n          <div className=\"text-red border border-red p-3\">{message}</div>\n        )}\n        <Input placeholder=\"First Name\" onChange={setFirstName} />\n        <Input placeholder=\"Last Name\" onChange={setLastName} />\n        <Input type=\"email\" placeholder=\"Email\" onChange={setEmail} />\n        <Input type=\"password\" placeholder=\"Password\" onChange={setPassword} />\n        <span className=\"text-accents-8\">\n          <span className=\"inline-block align-middle \">\n            <Info width=\"15\" height=\"15\" />\n          </span>{' '}\n          <span className=\"leading-6 text-sm\">\n            <strong>Info</strong>: Passwords must be longer than 7 chars and\n            include numbers.{' '}\n          </span>\n        </span>\n        <div className=\"pt-2 w-full flex flex-col\">\n          <Button\n            variant=\"slim\"\n            type=\"submit\"\n            loading={loading}\n            disabled={disabled}\n          >\n            Sign Up\n          </Button>\n        </div>\n\n        <span className=\"pt-1 text-center text-sm\">\n          <span className=\"text-accents-7\">Do you have an account?</span>\n          {` `}\n          <a\n            className=\"text-accent-9 font-bold hover:underline cursor-pointer\"\n            onClick={() => setModalView('LOGIN_VIEW')}\n          >\n            Log In\n          </a>\n        </span>\n      </div>\n    </form>\n  )\n}\n\nexport default SignUpView\n"]},"metadata":{},"sourceType":"module"}