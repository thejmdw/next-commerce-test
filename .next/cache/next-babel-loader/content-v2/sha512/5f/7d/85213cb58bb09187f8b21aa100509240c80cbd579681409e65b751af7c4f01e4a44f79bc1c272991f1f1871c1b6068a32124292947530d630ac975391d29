{"ast":null,"code":"import _regeneratorRuntime from \"/Users/thejmdw/workspace/websites/next-commerce-test/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/thejmdw/workspace/websites/next-commerce-test/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/thejmdw/workspace/websites/next-commerce-test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport useCustomer from '@commerce/customer/use-customer';\nimport { getCustomerQuery, getCustomerToken } from '../utils';\nexport default useCustomer;\nexport var handler = {\n  fetchOptions: {\n    query: getCustomerQuery\n  },\n  fetcher: function fetcher(_ref) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _data$customer;\n\n      var options, fetch, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              options = _ref.options, fetch = _ref.fetch;\n              _context.next = 3;\n              return fetch(_objectSpread(_objectSpread({}, options), {}, {\n                variables: {\n                  customerAccessToken: getCustomerToken()\n                }\n              }));\n\n            case 3:\n              data = _context.sent;\n              return _context.abrupt(\"return\", (_data$customer = data.customer) !== null && _data$customer !== void 0 ? _data$customer : null);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  useHook: function useHook(_ref2) {\n    var _s = $RefreshSig$();\n\n    var useData = _ref2.useData;\n    return _s(function (input) {\n      _s();\n\n      return useData({\n        swrOptions: _objectSpread({\n          revalidateOnFocus: false\n        }, input === null || input === void 0 ? void 0 : input.swrOptions)\n      });\n    }, \"7nuxJLEyQO4rIsd+AJDJHMkCeg4=\", false, function () {\n      return [useData];\n    });\n  }\n};","map":{"version":3,"sources":["/Users/thejmdw/workspace/websites/next-commerce-test/framework/shopify/customer/use-customer.tsx"],"names":["useCustomer","getCustomerQuery","getCustomerToken","handler","fetchOptions","query","fetcher","options","fetch","variables","customerAccessToken","data","customer","useHook","useData","input","swrOptions","revalidateOnFocus"],"mappings":";;;;;;;;AAAA,OAAOA,WAAP,MAAyC,iCAAzC;AAGA,SAASC,gBAAT,EAA2BC,gBAA3B,QAAmD,UAAnD;AAEA,eAAeF,WAAf;AAEA,OAAO,IAAMG,OAAiC,GAAG;AAC/CC,EAAAA,YAAY,EAAE;AACZC,IAAAA,KAAK,EAAEJ;AADK,GADiC;AAIzCK,EAAAA,OAJyC,yBAIb;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAlBC,cAAAA,OAAkB,QAAlBA,OAAkB,EAATC,KAAS,QAATA,KAAS;AAAA;AAAA,qBACbA,KAAK,iCACnBD,OADmB;AAEtBE,gBAAAA,SAAS,EAAE;AAAEC,kBAAAA,mBAAmB,EAAER,gBAAgB;AAAvC;AAFW,iBADQ;;AAAA;AAC1BS,cAAAA,IAD0B;AAAA,iEAKzBA,IAAI,CAACC,QALoB,2DAKR,IALQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMjC,GAV8C;AAW/CC,EAAAA,OAAO,EAAE;AAAA;;AAAA,QAAGC,OAAH,SAAGA,OAAH;AAAA,cAAiB,UAACC,KAAD,EAAW;AAAA;;AACnC,aAAOD,OAAO,CAAC;AACbE,QAAAA,UAAU;AACRC,UAAAA,iBAAiB,EAAE;AADX,WAELF,KAFK,aAELA,KAFK,uBAELA,KAAK,CAAEC,UAFF;AADG,OAAD,CAAd;AAMD,KAPQ;AAAA,cACAF,OADA;AAAA;AAAA;AAXsC,CAA1C","sourcesContent":["import useCustomer, { UseCustomer } from '@commerce/customer/use-customer'\nimport { Customer } from '@commerce/types'\nimport { SWRHook } from '@commerce/utils/types'\nimport { getCustomerQuery, getCustomerToken } from '../utils'\n\nexport default useCustomer as UseCustomer<typeof handler>\n\nexport const handler: SWRHook<Customer | null> = {\n  fetchOptions: {\n    query: getCustomerQuery,\n  },\n  async fetcher({ options, fetch }) {\n    const data = await fetch<any | null>({\n      ...options,\n      variables: { customerAccessToken: getCustomerToken() },\n    })\n    return data.customer ?? null\n  },\n  useHook: ({ useData }) => (input) => {\n    return useData({\n      swrOptions: {\n        revalidateOnFocus: false,\n        ...input?.swrOptions,\n      },\n    })\n  },\n}\n"]},"metadata":{},"sourceType":"module"}