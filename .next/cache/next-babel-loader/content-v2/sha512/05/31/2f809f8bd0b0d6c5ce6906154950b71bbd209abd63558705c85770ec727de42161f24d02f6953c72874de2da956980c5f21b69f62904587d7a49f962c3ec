{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/thejmdw/workspace/websites/next-commerce-test/components/ui/Modal/Modal.tsx\";\nimport { useRef, useEffect, useCallback } from 'react';\nimport Portal from '@reach/portal';\nimport s from './Modal.module.css';\nimport { Cross } from '@components/icons';\nimport { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from 'body-scroll-lock';\nimport FocusTrap from '@lib/focus-trap';\n\nconst Modal = ({\n  children,\n  open,\n  onClose,\n  onEnter = null\n}) => {\n  const ref = useRef();\n  const handleKey = useCallback(e => {\n    if (e.key === 'Escape') {\n      return onClose();\n    }\n  }, [onClose]);\n  useEffect(() => {\n    if (ref.current) {\n      if (open) {\n        disableBodyScroll(ref.current);\n        window.addEventListener('keydown', handleKey);\n      } else {\n        enableBodyScroll(ref.current);\n      }\n    }\n\n    return () => {\n      window.removeEventListener('keydown', handleKey);\n      clearAllBodyScrollLocks();\n    };\n  }, [open, handleKey]);\n  return /*#__PURE__*/_jsxDEV(Portal, {\n    children: open ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.root,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.modal,\n        role: \"dialog\",\n        ref: ref,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onClose(),\n          \"aria-label\": \"Close panel\",\n          className: \"hover:text-gray-500 transition ease-in-out duration-150 focus:outline-none absolute right-0 top-0 m-6\",\n          children: /*#__PURE__*/_jsxDEV(Cross, {\n            className: \"h-6 w-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FocusTrap, {\n          focusFirst: true,\n          children: children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this) : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\nexport default Modal;","map":{"version":3,"sources":["/Users/thejmdw/workspace/websites/next-commerce-test/components/ui/Modal/Modal.tsx"],"names":["useRef","useEffect","useCallback","Portal","s","Cross","disableBodyScroll","enableBodyScroll","clearAllBodyScrollLocks","FocusTrap","Modal","children","open","onClose","onEnter","ref","handleKey","e","key","current","window","addEventListener","removeEventListener","root","modal"],"mappings":";;AAAA,SAAaA,MAAb,EAAqBC,SAArB,EAAgCC,WAAhC,QAAmD,OAAnD;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,CAAP,MAAc,oBAAd;AACA,SAASC,KAAT,QAAsB,mBAAtB;AACA,SACEC,iBADF,EAEEC,gBAFF,EAGEC,uBAHF,QAIO,kBAJP;AAKA,OAAOC,SAAP,MAAsB,iBAAtB;;AASA,MAAMC,KAAgB,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,IAAZ;AAAkBC,EAAAA,OAAlB;AAA2BC,EAAAA,OAAO,GAAG;AAArC,CAAD,KAAiD;AACxE,QAAMC,GAAG,GAAGf,MAAM,EAAlB;AAEA,QAAMgB,SAAS,GAAGd,WAAW,CAC1Be,CAAD,IAAsB;AACpB,QAAIA,CAAC,CAACC,GAAF,KAAU,QAAd,EAAwB;AACtB,aAAOL,OAAO,EAAd;AACD;AACF,GAL0B,EAM3B,CAACA,OAAD,CAN2B,CAA7B;AASAZ,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIc,GAAG,CAACI,OAAR,EAAiB;AACf,UAAIP,IAAJ,EAAU;AACRN,QAAAA,iBAAiB,CAACS,GAAG,CAACI,OAAL,CAAjB;AACAC,QAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCL,SAAnC;AACD,OAHD,MAGO;AACLT,QAAAA,gBAAgB,CAACQ,GAAG,CAACI,OAAL,CAAhB;AACD;AACF;;AACD,WAAO,MAAM;AACXC,MAAAA,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCN,SAAtC;AACAR,MAAAA,uBAAuB;AACxB,KAHD;AAID,GAbQ,EAaN,CAACI,IAAD,EAAOI,SAAP,CAbM,CAAT;AAeA,sBACE,QAAC,MAAD;AAAA,cACGJ,IAAI,gBACH;AAAK,MAAA,SAAS,EAAER,CAAC,CAACmB,IAAlB;AAAA,6BACE;AAAK,QAAA,SAAS,EAAEnB,CAAC,CAACoB,KAAlB;AAAyB,QAAA,IAAI,EAAC,QAA9B;AAAuC,QAAA,GAAG,EAAET,GAA5C;AAAA,gCACE;AACE,UAAA,OAAO,EAAE,MAAMF,OAAO,EADxB;AAEE,wBAAW,aAFb;AAGE,UAAA,SAAS,EAAC,uGAHZ;AAAA,iCAKE,QAAC,KAAD;AAAO,YAAA,SAAS,EAAC;AAAjB;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,gBADF,eAQE,QAAC,SAAD;AAAW,UAAA,UAAU,MAArB;AAAA,oBAAuBF;AAAvB;AAAA;AAAA;AAAA;AAAA,gBARF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADG,GAaD;AAdN;AAAA;AAAA;AAAA;AAAA,UADF;AAkBD,CA7CD;;AA+CA,eAAeD,KAAf","sourcesContent":["import { FC, useRef, useEffect, useCallback } from 'react'\nimport Portal from '@reach/portal'\nimport s from './Modal.module.css'\nimport { Cross } from '@components/icons'\nimport {\n  disableBodyScroll,\n  enableBodyScroll,\n  clearAllBodyScrollLocks,\n} from 'body-scroll-lock'\nimport FocusTrap from '@lib/focus-trap'\ninterface Props {\n  className?: string\n  children?: any\n  open?: boolean\n  onClose: () => void\n  onEnter?: () => void | null\n}\n\nconst Modal: FC<Props> = ({ children, open, onClose, onEnter = null }) => {\n  const ref = useRef() as React.MutableRefObject<HTMLDivElement>\n\n  const handleKey = useCallback(\n    (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        return onClose()\n      }\n    },\n    [onClose]\n  )\n\n  useEffect(() => {\n    if (ref.current) {\n      if (open) {\n        disableBodyScroll(ref.current)\n        window.addEventListener('keydown', handleKey)\n      } else {\n        enableBodyScroll(ref.current)\n      }\n    }\n    return () => {\n      window.removeEventListener('keydown', handleKey)\n      clearAllBodyScrollLocks()\n    }\n  }, [open, handleKey])\n\n  return (\n    <Portal>\n      {open ? (\n        <div className={s.root}>\n          <div className={s.modal} role=\"dialog\" ref={ref}>\n            <button\n              onClick={() => onClose()}\n              aria-label=\"Close panel\"\n              className=\"hover:text-gray-500 transition ease-in-out duration-150 focus:outline-none absolute right-0 top-0 m-6\"\n            >\n              <Cross className=\"h-6 w-6\" />\n            </button>\n            <FocusTrap focusFirst>{children}</FocusTrap>\n          </div>\n        </div>\n      ) : null}\n    </Portal>\n  )\n}\n\nexport default Modal\n"]},"metadata":{},"sourceType":"module"}